
*** HYBRID CHANGELOG
*** Newest entries at top

version hybrid-6-b52   15-Mar-1999
* added fix by comstud to s_misc.c remove_dependents() unnecessary WALLOPS
-comstud/orabidoo	
* fixed mtrie_conf.c bugs
* added ip to /trace (help with virtual host cloners)
-Dianora
	
version hybrid-6-b51   11-Mar-1999
* added WHOIS_WAIT to info output 
-Rodder
* was using idented username instead of ~ name for unidented clients
  caused weird bug. s_conf.c attach_Iline()
* clients with > I line were still being limited by client per IP limits.
* had BUFSIZ instead of BUFSIZE in strncpy() in s_serv.c broke m_unkline
* fixed "Bad Nick" problem. was harmless but stupid. users who used
  a nick beginning with '~' would trigger this one. Had Q line code in
  slightly wrong place. s_user.c m_nick()
* fixed truncation for username, affects k-lines both unidented, idented.
  s_user.c register_user()
* Added sendto_realops notification of spoofed IP's. should be SYSLOG
  or logged, for proper backtracking if necessary IMO
* fixed CLUSTER code, still needs thorough testing. s_serv.c send.c
-Dianora
	
version hybrid-6-b50   24-Feb-1999
* report_specials was showing aconf->host not aconf->user
* return ERR_TOOMANYTARGETS if privmsg is used with multiple targets	
-Dianora
	
version hybrid-6-b49   19-Feb-1999
* botch with POLL code fixed, forgot to test it on solaris after
  adding back fdlist code *sigh* 
-Dianora
	
version hybrid-6-b48   19-Feb-1999
* allow all opers to see stats c IP's
* added two more examples to Q lines, crush and cwush
* added fix from syrk (Christophe Kalt) in res.c
-Dianora

version hybrid-6-b47
* oops I don't know what happened to this one, but irc.colorado.edu
is running this one oops.

version hybrid-6-b46   15-Feb-1999
* put fdlist code back in. Ok, I goofed. mea culpa.
* #ifdef USE_SYSLOG missing in ircd.c
* Ultrix'ed the Makefile.in as per Ian
-Dianora

version hybrid-6-b46   15-Feb-1999
* FAST_FD_ISSET was causing the high CPU, *sigh* ok ripped out for now
* Fixed buffer overflow problem in m_unkline() s_serv.c, if a long long
  kline was in the kline.conf file, it cored the server. (reported by Phisher)
-Dianora
	
version hybrid-6-b45    9-Feb-1999
* may as well use the same numeric for not being able to join a channel
  as ircnet uses changes to channel.c, s_err.c, s_err.h, numeric.h
* added small net user count to split end detection
* removed lame sleep()
* try non blocking reads of all connected servers, local opers
 then read_message()
-Dianora
	
version hybrid-6-b44    2-Feb-1999
* remove trailing white space on H/L lines (just for Gersh)
* (s_bsd.c) fixed a botch with rr = 0 causing bizarre behaviour under solaris
  (ping time outs etc.) due to a mis-cut and paste from the select code
* (s_bsd.c) redid read_packet() to use msg_ready again
* (s_bsd.c) removed unnecessary default_read_set default_write_set, that was a
  remnant from a failed experiment with pre-set up fd set's, it was
  just slowing down the code for no reason.
* (s_misc.c) redid get_client_name() slightly to be consistent,
  idented names should not have ~ non-idented names should have ~
  lets not be inconsistent with (+) prefixes for idented names
-Dianora
* changed example.conf to remind people to have their virtual address in
  the M: line for outbound connects
* fixed the STATS_NOTICE invalid directive.  made it #define by default.
-FlashMan
* channel has to be +ip to show invite notices "p is for paranoid
  and thats good enough for me" too many complaints. I think this
  is a reasonable way of doing it for now.
* s_bsd.c moved some code around in in connect_inet() to remove
  a redundant if(specific_virtual_host). Also moved the error check
  on socket open logically where it should be.
* fixed the USE_FAST_FD_ISSET botch I introduced, corrected an unforseen
  error thats been there for a while.
* added a little more useful information in the bug report in blalloc.c
  I added a report of what size of block is being freed.
* I added a horrible kludge to ircd.c/struct.h to bit mark clients
  that have already been exited. It appears that somehow, the same
  client is being examined twice and exited twice =occasionally=
  Because of the block allocator, its safe to check the bit after free
  *kludge* I really didn't want to admit I coded that.
* Don't allow non local opers to see spoofed I lines. 
-Dianora
	
version hybrid-6-b43    24-Jan-1999
* reworked io_loop dropping CPU load significantly, this is still something 
  that needs to be looked at.
* allow stats p even if LTRACE is defined, its habit for users even if
  it is redundant.
* I liked WINTRHAWK RPL_TRACESERVER report, so thats now the default.
* Added a test in DEBUGMODE to ensure fd == 2 was never read. This
  won't happen with select() read, but can if read_messages is
  called directly. Might as well be paranoid about it now. This one
  caused ircd to abort when compiled with DEBUGMODE in b42
-Dianora
	
version hybrid-6-b42    24-Jan-1999
* removed [IP] being sent in CONNECT in connect burst
* removed [IP] if seen in m_links from prying eyes of users
-Dianora
	
version hybrid-6-b41    23-Jan-1999
* removed USERNAMES_IN_TRACE default is always on now
* get_client_name() will default to sptr->username if sptr->user->username
  is null
* made config.h/config.h.dist consistent again, went back to stock defaults
-Dianora
	
version hybrid-6-b40    21-Jan-1999
* redid m_invite for better sanity testing, you can no longer
  invite users to a non-existent channel for example.
* Don't send SJOIN's for zero length MODE_SPLIT channels (Mortiis)
* redid m_sjoin for MODE_SPLIT channels treat it as a brand new channel
* fixed broken NO_JOIN_ON_SPLIT to only care about channels that had
  existed before a split

-Dianora

version hybrid-6-b39	20-Jan-1999
* sanity test m_gline parc argument count, older hybrid-5 servers
  with buggy GLINE can core new hybrid-6 correct GLINE code 
* Forward the GLINE even if GLINE is not defined on this server.
  No point having GLINE for opers on a HUB for example, and servers
  that wish to opt out of others placing GLINE's can still relay it.
* keep a link list of 0 member channels created on a split
  if PRESERVE_CHANNEL_ON_SPLIT or NO_JOIN_ON_SPLIT is defined
  remove all 0 member channels when split heals
  redid NO_JOIN_ON_SPLIT to only care about channels that once existed.

-Dianora
	
version hybrid-6-b38	20-Jan-1999

* bumped version up to b38
* fixed bugs with "reason" code in ircd.c
* duplicated config.h to config.h.dist	
* fixed bug in ircd.c with SEND_FAKE_KILL_TO_CLIENT
  if IDLE_CHECK not defined
* Added new defines to m_info() in s_serv.c
* Started adding code to deal with user@IP I lines to s_conf.c

-Dianora
	
============================================================================
|        Mon Jan 18 00:13:39 PST 1999	Jake Khuon <khuon@GCtr.Net>        |
============================================================================

* b37mod1

[1] Added the following options:

	IDLE_IGNORE
		When used in conjunction with IDLE_CHECK will prevent the
	        server from idle'ing clients connected from the listed IP#s. 
	        This should probably be moved into a conf file entry at
	        some point in the future.
	
	SEND_FAKE_KILL_TO_CLIENT
		Make the client think it's being KILL'ed.  This was
		originally intended to prevent clients from reconnecting to
		the server after being dropped for idleness.  It can
		probably be used for other events too.  This really only
		works well if the client was compiled with
		QUIT_ON_OPERATOR_KILL which was mandatory policy on
		UMich.Edu hosts.

	LTRACE (Limited TRACE)
		Reports only link and oper traces even when O:line is
		active. Displays only Oper, Serv, Link, and Class reports
		even if the O-line is active.  Useful for just showing
		pertinent info of a specific server. Note however that if
		the target server is not running this option then you will
		still receive a normal trace output.  Defining this will
		remove "STATS p" funtionality since the two are basically
		redundant.

	LWALLOPS
		This is actually a compatibility command which really calls
		m_locops().

	STATS_NOTICE
		Notify opers on STATS request.  Some people find this
		invasive and with the STAT command on PACE throttle the
		server shouldn't suffer but lusers stat for different
		reasons and many times it's been a prelude to some other
		form of attack.  Wrestle with your own morals before
		defining.

	SHOW_FAILED_OPER_ID
		If FAILED_OPER_NOTICE is defined, also notify when a client
		fails to oper because of a identity mismatch (wrong host or
		nick)

	SHOW_FAILED_OPER_PASSWD
		If FAILED_OPER_NOTICE is defined, also show the attempted
		passwd.  Once again, this may be morally offensive.

	WINTRHAWK
		Enable WintrHawk's style of reporting things.  This is most
		evident in TRACE and LTRACE which won't report idletimes
		otherwise.


[2] Bugfixes/changes:

	Fixed *_WHEN_SPLIT bug whereby a server was still considered split
	even though the network had reached SPLIT_SMALLNET_SIZE (but hadn't
	yet surpassed it).

	Added capability for defining OPER_UMODES, LOCOP_UMODES, and
	DEFAULT_SERVER_SPLIT_RECOVERY_TIME from config.h.

	Fixed m_trace() so that it now reports correct idletimes and added
	WINTRHAWK styling option.

	Updated opers.txt with mod1 commands.

	Added a ChangeLog |8^)

	Added some code for K-line files but it's not yet functional
============================================================================


version hybrid-6-b37	13-Jan-1999

* removed M: line port & address activation on startup
  you *must* use at least one P: line in your config file now -- FlashMan
* completely rewrote get_client_name() to clean up the conditionals mess
  makes things look prettier overall -- FlashMan
* RPL_YOURHOST is now given to the client as server_name[sockhost/port]
  that the client connected to -- for virtual addresses and such -- FlashMan
* Removed SHOW_UH define from config.h -- no longer needed -- FlashMan
